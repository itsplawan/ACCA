<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GitHub Pages PDF Viewer</title>
</head>
<body>
    <h1>GitHub Pages PDF Viewer</h1>
    <ul id="file-list">Loading...</ul>

    <script>
        const repoOwner = "itsplawan";  // Your GitHub username
        const repoName = "ACCA";        // Your GitHub repository name
        const pdfFolder = "pdfs";       // Folder where PDFs are located (e.g., 'pdfs')

        // This URL fetches the content from your GitHub repo's folder
        const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${pdfFolder}/`;

        // Function to fetch PDF files from the repository
        async function fetchRepoContents() {
            const response = await fetch(apiUrl);
            const data = await response.json();

            // If the request is unsuccessful
            if (!response.ok) {
                console.error("Error fetching repository contents:", response.status, response.statusText);
                return;
            }

            const fileList = document.getElementById("file-list");
            fileList.innerHTML = "";  // Clear loading text

            // Iterate through each item in the directory
            data.forEach(item => {
                // Skip directories or unwanted files (e.g., 'index.html', 'build', 'web')
                if (item.type === "file" && item.name.endsWith(".pdf")) {
                    const listItem = document.createElement("li");
                    const link = document.createElement("a");

                    link.href = item.html_url;
                    link.textContent = item.name;

                    // Open the link in a new tab
                    link.target = "_blank";

                    listItem.appendChild(link);
                    fileList.appendChild(listItem);
                }
            });
        }

        // Call the function to fetch contents and display the file list
        fetchRepoContents();
    </script>
</body>
</html>
