<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Pages PDF Viewer</title>
    <link rel="stylesheet" href="/assets/css/style.css">
  </head>
  <body>
    <header>
      <h1>GitHub Pages PDF Viewer</h1>
      <p>Automatically display PDFs and directories from GitHub repo</p>
      <p><a href="https://github.com/itsplawan/ACCA">View Project on GitHub</a></p>
    </header>

    <section>
      <h2>PDFs Available:</h2>
      <ul id="file-list">Loading PDFs...</ul>
      
      <h2>PDF Viewer:</h2>
      <iframe id="pdf-viewer" width="100%" height="600px" style="display:none;"></iframe>
    </section>

    <footer>
      <p>This project is maintained by <a href="https://github.com/itsplawan">itsplawan</a></p>
    </footer>

    <script>
      const repoOwner = "itsplawan";
      const repoName = "ACCA";
      const pdfFolder = "pdfs"; // Folder where PDFs are stored

      async function fetchRepoContents() {
        const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${pdfFolder}`;
        const response = await fetch(apiUrl);
        const data = await response.json();
        const fileList = document.getElementById("file-list");

        fileList.innerHTML = "";
        data.forEach(item => {
          if (item.type === "file" && item.name.endsWith(".pdf")) {
            const listItem = document.createElement("li");
            const link = document.createElement("a");
            link.href = "#";
            link.textContent = item.name;
            link.onclick = () => openPdf(item.download_url);
            listItem.appendChild(link);
            fileList.appendChild(listItem);
          }
        });
      }

      function openPdf(url) {
        const viewer = document.getElementById("pdf-viewer");
        viewer.style.display = "block";
        viewer.src = url;
      }

      fetchRepoContents();
    </script>
  </body>
</html>
